#include <stdio.h>

struct Process{
    int id,at,bt,ct,tat,wt,done;
};

int main(){
    int n,i,c=0,t=0;
    printf("enter no of processes: ");
    scanf("%d",&n);
    
    struct Process p[n];
    int s[n],e[n],g=0;
    
    for(i=0;i<n;i++){
        printf("enter AT & BT: ");
        scanf("%d%d",&p[i].at,&p[i].bt);
        p[i].id=i+1;
        p[i].done=0;
    }
    
    printf("Gantt Chart\n");
    
    while(c<n){
        int min=9999,idx=-1;
        for(i=0;i<n;i++){
        if(!p[i].done && p[i].at<=t && p[i].bt<min){
            min=p[i].bt;
            idx=i;
        }}
        if(idx==-1){
            t++;
            continue;
        }
            s[g]=t;
            t+=p[idx].bt;
            e[g]=t;
            p[idx].ct=t;
            p[idx].tat=t-p[idx].at;
            p[idx].wt=p[idx].tat-p[idx].bt;
            p[idx].done=1;
            printf("P%d\t| ",p[idx].id);
            g++;
            c++;
    }printf("\n");  
    for(i=0;i<g;i++){
        printf("%d\t",s[i]);
    }printf("%d",e[g-1]);
    
    printf("\nProcess\tAT\tBT\tCT\tTAT\tWT\n");
    
    float avgTAT=0,avgWT=0;
    
    for(i=0;i<n;i++){
        printf("%d\t%d\t%d\t%d\t%d\t%d\n",p[i].id,p[i].at,p[i].bt,p[i].ct,p[i].tat,p[i].wt);
        avgTAT+=p[i].tat;
        avgWT+=p[i].wt;
    }
    
    printf("\n Average TAT : %.2f Average WT : %.2f",avgTAT/n,avgWT/n);
    return 0;
}
